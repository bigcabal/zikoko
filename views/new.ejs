<%- partial('./partials/header.ejs', { includeFeedFilter: false }) %>

<div class="zkk-site-wrap">
  <div class="zkk-main zkk-main--full-width">

    <div class="form-page card">
      <div class="form-page__inner">

        <div class="form-page__heading">
          <h2 class="form-page__title">New Post</h2>
          <p class="form-page__subtitle">Lorem ipsum dolor sit amet consectetur adipisicing elit incididunt ut labore.</p>
        </div>

        <form action="/new" method="post" enctype="multipart/form-data" class="form form-page__form form--no-label">
          <div class="form__group">
              <div class="form__image-field">
                  <div class="form__image-prompt">
                      <div class="form__image-prompt-icon">
                          <i class="ion-upload"></i>
                      </div>
                      <span class="form__image-prompt-text">Choose an image</span>
                  </div>
                  <img src="" class="form__image-uploaded" aria-hidden="true">
                  <div class="form__image-file-and-label">
                      <input type="file" id="postImage" name="postImage" class="form__image-file" accept="image/*">
                      <label for="postImage" class="form__image-label"></label>
                  </div>
              </div>
          </div>

          <div class="form__group">
            <textarea name="description" class="form__field" rows="3" placeholder="Description"></textarea>
          </div>

          <div class="form__group">
            <input name="tags" class="form__field" placeholder="Tags, e.g #lol #omg #naija" />
          </div>

          <div class="form__action">
            <button class="button button--md button--full-width" type="submit">
              <span class="button__text">Upload Post</span>
            </button>
          </div>
        </form>

      </div>
    </div>
  </div>
</div>

<script>
    var image = document.querySelector('.form__image-uploaded');

    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                image.src = e.target.result;
            }

            reader.readAsDataURL(input.files[0]);
        }
    }

    document.getElementById("postImage").addEventListener('change', function(){
        readURL(this);
    });
</script>


